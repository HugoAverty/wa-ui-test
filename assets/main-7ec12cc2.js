class W{constructor(e){this.properties=e??[]}get(e){const n=this.properties.filter(r=>r.name===e).map(r=>r.value);if(n.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(n.length!==0)return n[0]}getString(e){return this.getByType(e,"string")}getNumber(e){return this.getByType(e,"number")}getBoolean(e){return this.getByType(e,"boolean")}getByType(e,n){const r=this.get(e);if(r!==void 0){if(n!=="json"&&typeof r!==n)throw new Error('Expected property "'+e+'" to have type "'+n+'"');return r}}mustGetString(e){return this.mustGetByType(e,"string")}mustGetNumber(e){return this.mustGetByType(e,"number")}mustGetBoolean(e){return this.mustGetByType(e,"boolean")}mustGetByType(e,n){const r=this.get(e);if(r===void 0)throw new Error('Property "'+e+'" is missing');if(n!=="json"&&typeof r!==n)throw new Error('Expected property "'+e+'" to have type "'+n+'"');return r}getType(e){const n=this.properties.filter(r=>r.name===e).map(r=>r.type);if(n.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(n.length!==0)return n[0]}}const G="https://unpkg.com/@workadventure/scripting-api-extra@1.4.8/dist";class re{constructor(e){this.name=e.name,this.x=e.x,this.y=e.y,this.properties=new W(e.properties)}get isReadable(){const e=this.properties.getString("readableBy");return e?WA.player.tags.includes(e):!0}get isWritable(){const e=this.properties.getString("writableBy");return e?WA.player.tags.includes(e):!0}}function D(t){const e=t?"#"+t.join():"";WA.nav.openCoWebSite(G+"/configuration.html"+e)}async function oe(t,e){const n=await WA.room.getTiledMap(),r=new Map;return Y(n.layers,r,t,e),r}function Y(t,e,n,r){for(const o of t)if(o.type==="objectgroup"){for(const i of o.objects)if(i.type==="variable"||i.class==="variable"){if(n&&o.name!==n||r&&!r.includes(i.name))continue;e.set(i.name,new re(i))}}else o.type==="group"&&Y(o.layers,e,n,r)}let R;async function L(){return R===void 0&&(R=ie()),R}async function ie(){return ae(await WA.room.getTiledMap())}function ae(t){const e=new Map;return J(t.layers,"",e),e}function J(t,e,n){for(const r of t)r.type==="group"?J(r.layers,e+r.name+"/",n):(r.name=e+r.name,n.set(r.name,r))}async function Q(){const t=await L(),e=[];for(const n of t.values())if(n.type==="objectgroup")for(const r of n.objects)(r.type==="area"||r.class==="area")&&e.push(r);return e}function se(t){let e=1/0,n=1/0,r=0,o=0;const i=t.data;if(typeof i=="string")throw new Error("Unsupported tile layer data stored as string instead of CSV");for(let a=0;a<t.height;a++)for(let s=0;s<t.width;s++)i[s+a*t.width]!==0&&(e=Math.min(e,s),o=Math.max(o,s),n=Math.min(n,a),r=Math.max(r,a));return{top:n,left:e,right:o+1,bottom:r+1}}function F(t){let e=1/0,n=1/0,r=0,o=0;for(const i of t){const a=se(i);a.left<e&&(e=a.left),a.top<n&&(n=a.top),a.right>o&&(o=a.right),a.bottom>r&&(r=a.bottom)}return{top:n,left:e,right:o,bottom:r}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var ue=Object.prototype.toString,S=Array.isArray||function(e){return ue.call(e)==="[object Array]"};function I(t){return typeof t=="function"}function ce(t){return S(t)?"array":typeof t}function V(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function O(t,e){return t!=null&&typeof t=="object"&&e in t}function le(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var pe=RegExp.prototype.test;function fe(t,e){return pe.call(t,e)}var ge=/\S/;function de(t){return!fe(ge,t)}var he={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function ye(t){return String(t).replace(/[&<>"'`=\/]/g,function(n){return he[n]})}var me=/\s*/,be=/\s+/,_=/\s*=/,ve=/\s*\}/,Ae=/#|\^|\/|>|\{|&|=|!/;function We(t,e){if(!t)return[];var n=!1,r=[],o=[],i=[],a=!1,s=!1,u="",l=0;function f(){if(a&&!s)for(;i.length;)delete o[i.pop()];else i=[];a=!1,s=!1}var h,m,T;function C(v){if(typeof v=="string"&&(v=v.split(be,2)),!S(v)||v.length!==2)throw new Error("Invalid tags: "+v);h=new RegExp(V(v[0])+"\\s*"),m=new RegExp("\\s*"+V(v[1])),T=new RegExp("\\s*"+V("}"+v[1]))}C(e||d.tags);for(var p=new P(t),b,c,y,E,B,A;!p.eos();){if(b=p.pos,y=p.scanUntil(h),y)for(var x=0,ne=y.length;x<ne;++x)E=y.charAt(x),de(E)?(i.push(o.length),u+=E):(s=!0,n=!0,u+=" "),o.push(["text",E,b,b+1]),b+=1,E===`
`&&(f(),u="",l=0,n=!1);if(!p.scan(h))break;if(a=!0,c=p.scan(Ae)||"name",p.scan(me),c==="="?(y=p.scanUntil(_),p.scan(_),p.scanUntil(m)):c==="{"?(y=p.scanUntil(T),p.scan(ve),p.scanUntil(m),c="&"):y=p.scanUntil(m),!p.scan(m))throw new Error("Unclosed tag at "+p.pos);if(c==">"?B=[c,y,b,p.pos,u,l,n]:B=[c,y,b,p.pos],l++,o.push(B),c==="#"||c==="^")r.push(B);else if(c==="/"){if(A=r.pop(),!A)throw new Error('Unopened section "'+y+'" at '+b);if(A[1]!==y)throw new Error('Unclosed section "'+A[1]+'" at '+b)}else c==="name"||c==="{"||c==="&"?s=!0:c==="="&&C(y)}if(f(),A=r.pop(),A)throw new Error('Unclosed section "'+A[1]+'" at '+p.pos);return Se(we(o))}function we(t){for(var e=[],n,r,o=0,i=t.length;o<i;++o)n=t[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(e.push(n),r=n));return e}function Se(t){for(var e=[],n=e,r=[],o,i,a=0,s=t.length;a<s;++a)switch(o=t[a],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":i=r.pop(),i[5]=o[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(o)}return e}function P(t){this.string=t,this.tail=t,this.pos=0}P.prototype.eos=function(){return this.tail===""};P.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};P.prototype.scanUntil=function(e){var n=this.tail.search(e),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function w(t,e){this.view=t,this.cache={".":this.view},this.parent=e}w.prototype.push=function(e){return new w(e,this)};w.prototype.lookup=function(e){var n=this.cache,r;if(n.hasOwnProperty(e))r=n[e];else{for(var o=this,i,a,s,u=!1;o;){if(e.indexOf(".")>0)for(i=o.view,a=e.split("."),s=0;i!=null&&s<a.length;)s===a.length-1&&(u=O(i,a[s])||le(i,a[s])),i=i[a[s++]];else i=o.view[e],u=O(o.view,e);if(u){r=i;break}o=o.parent}n[e]=r}return I(r)&&(r=r.call(this.view)),r};function g(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}g.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};g.prototype.parse=function(e,n){var r=this.templateCache,o=e+":"+(n||d.tags).join(":"),i=typeof r<"u",a=i?r.get(o):void 0;return a==null&&(a=We(e,n),i&&r.set(o,a)),a};g.prototype.render=function(e,n,r,o){var i=this.getConfigTags(o),a=this.parse(e,i),s=n instanceof w?n:new w(n,void 0);return this.renderTokens(a,s,r,e,o)};g.prototype.renderTokens=function(e,n,r,o,i){for(var a="",s,u,l,f=0,h=e.length;f<h;++f)l=void 0,s=e[f],u=s[0],u==="#"?l=this.renderSection(s,n,r,o,i):u==="^"?l=this.renderInverted(s,n,r,o,i):u===">"?l=this.renderPartial(s,n,r,i):u==="&"?l=this.unescapedValue(s,n):u==="name"?l=this.escapedValue(s,n,i):u==="text"&&(l=this.rawValue(s)),l!==void 0&&(a+=l);return a};g.prototype.renderSection=function(e,n,r,o,i){var a=this,s="",u=n.lookup(e[1]);function l(m){return a.render(m,n,r,i)}if(u){if(S(u))for(var f=0,h=u.length;f<h;++f)s+=this.renderTokens(e[4],n.push(u[f]),r,o,i);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")s+=this.renderTokens(e[4],n.push(u),r,o,i);else if(I(u)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,o.slice(e[3],e[5]),l),u!=null&&(s+=u)}else s+=this.renderTokens(e[4],n,r,o,i);return s}};g.prototype.renderInverted=function(e,n,r,o,i){var a=n.lookup(e[1]);if(!a||S(a)&&a.length===0)return this.renderTokens(e[4],n,r,o,i)};g.prototype.indentPartial=function(e,n,r){for(var o=n.replace(/[^ \t]/g,""),i=e.split(`
`),a=0;a<i.length;a++)i[a].length&&(a>0||!r)&&(i[a]=o+i[a]);return i.join(`
`)};g.prototype.renderPartial=function(e,n,r,o){if(r){var i=this.getConfigTags(o),a=I(r)?r(e[1]):r[e[1]];if(a!=null){var s=e[6],u=e[5],l=e[4],f=a;u==0&&l&&(f=this.indentPartial(a,l,s));var h=this.parse(f,i);return this.renderTokens(h,n,r,f,o)}}};g.prototype.unescapedValue=function(e,n){var r=n.lookup(e[1]);if(r!=null)return r};g.prototype.escapedValue=function(e,n,r){var o=this.getConfigEscape(r)||d.escape,i=n.lookup(e[1]);if(i!=null)return typeof i=="number"&&o===d.escape?String(i):o(i)};g.prototype.rawValue=function(e){return e[1]};g.prototype.getConfigTags=function(e){return S(e)?e:e&&typeof e=="object"?e.tags:void 0};g.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!S(e))return e.escape};var d={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){M.templateCache=t},get templateCache(){return M.templateCache}},M=new g;d.clearCache=function(){return M.clearCache()};d.parse=function(e,n){return M.parse(e,n)};d.render=function(e,n,r,o){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+ce(e)+'" was given as the first argument for mustache#render(template, view, partials)');return M.render(e,n,r,o)};d.escape=ye;d.Scanner=P;d.Context=w;d.Writer=g;class Z{constructor(e,n){this.template=e,this.state=n,this.ast=d.parse(e)}getValue(){return this.value===void 0&&(this.value=d.render(this.template,this.state)),this.value}onChange(e){const n=[];for(const r of this.getUsedVariables().values())n.push(this.state.onVariableChange(r).subscribe(()=>{const o=d.render(this.template,this.state);o!==this.value&&(this.value=o,e(this.value))}));return{unsubscribe:()=>{for(const r of n)r.unsubscribe()}}}isPureString(){return this.ast.length===0||this.ast.length===1&&this.ast[0][0]==="text"}getUsedVariables(){const e=new Set;return this.recursiveGetUsedVariables(this.ast,e),e}recursiveGetUsedVariables(e,n){for(const r of e){const o=r[0],i=r[1],a=r[4];["name","&","#","^"].includes(o)&&n.add(i),a!==void 0&&typeof a!="string"&&this.recursiveGetUsedVariables(a,n)}}}async function Ce(){var t;const e=await Q();for(const n of e){const r=(t=n.properties)!==null&&t!==void 0?t:[];for(const o of r){if(o.type==="int"||o.type==="bool"||o.type==="object"||typeof o.value!="string")continue;const i=new Z(o.value,WA.state);if(i.isPureString())continue;const a=i.getValue();await N(n.name,o.name,a),i.onChange(async s=>{await N(n.name,o.name,s)})}}}async function Ee(){var t;const e=await L();for(const[n,r]of e.entries())if(r.type!=="objectgroup"){const o=(t=r.properties)!==null&&t!==void 0?t:[];for(const i of o){if(i.type==="int"||i.type==="bool"||i.type==="object"||typeof i.value!="string")continue;const a=new Z(i.value,WA.state);if(a.isPureString())continue;const s=a.getValue();K(n,i.name,s),a.onChange(u=>{K(n,i.name,u)})}}}async function N(t,e,n){console.log(t),(await WA.room.area.get(t)).setProperty(e,n)}function K(t,e,n){WA.room.setProperty(t,e,n),e==="visible"&&(n?WA.room.showLayer(t):WA.room.hideLayer(t))}let j,q=0,U=0;function $(t){if(WA.state[t.name]){let e=t.properties.mustGetString("openLayer");for(const n of e.split(`
`))WA.room.showLayer(n);e=t.properties.mustGetString("closeLayer");for(const n of e.split(`
`))WA.room.hideLayer(n)}else{let e=t.properties.mustGetString("openLayer");for(const n of e.split(`
`))WA.room.hideLayer(n);e=t.properties.mustGetString("closeLayer");for(const n of e.split(`
`))WA.room.showLayer(n)}}function Me(t){const e=t.properties.getString("openSound"),n=t.properties.getNumber("soundRadius");let r=1;if(n){const o=te(t.properties.mustGetString("openLayer").split(`
`));if(o>n)return;r=1-o/n}e&&WA.sound.loadSound(e).play({volume:r})}function Le(t){const e=t.properties.getString("closeSound"),n=t.properties.getNumber("soundRadius");let r=1;if(n){const o=te(t.properties.mustGetString("closeLayer").split(`
`));if(o>n)return;r=1-o/n}e&&WA.sound.loadSound(e).play({volume:r})}function ee(t){return t.map(e=>j.get(e)).filter(e=>(e==null?void 0:e.type)==="tilelayer")}function te(t){const e=ee(t),n=F(e),r=((n.right-n.left)/2+n.left)*32,o=((n.bottom-n.top)/2+n.top)*32;return Math.sqrt(Math.pow(q-r,2)+Math.pow(U-o,2))}function Pe(t){WA.state.onVariableChange(t.name).subscribe(()=>{WA.state[t.name]?Me(t):Le(t),$(t)}),$(t)}function z(t,e,n,r){const o=t.name;let i,a,s=!1;const u=n.getString("tag");let l=!0;u&&!WA.player.tags.includes(u)&&(l=!1);const f=!!u;function h(){var c;i&&i.remove(),i=WA.ui.displayActionMessage({message:(c=n.getString("closeTriggerMessage"))!==null&&c!==void 0?c:"Press SPACE to close the door",callback:()=>{WA.state[e.name]=!1,m()}})}function m(){var c;i&&i.remove(),i=WA.ui.displayActionMessage({message:(c=n.getString("openTriggerMessage"))!==null&&c!==void 0?c:"Press SPACE to open the door",callback:()=>{WA.state[e.name]=!0,h()}})}function T(){let c;if(t.type==="tilelayer")c=F(ee(e.properties.mustGetString("closeLayer").split(`
`)));else{if(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)throw new Error(`Doorstep zone "${t.name}" is missing x, y, width or height`);c={top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}a=WA.room.website.create({name:"doorKeypad"+o,url:r+"/keypad.html#"+encodeURIComponent(o),position:{x:c.right*32,y:c.top*32,width:32*3,height:32*4},allowApi:!0})}function C(){a&&(WA.room.website.delete(a.name),a=void 0)}function p(){if(s=!0,n.getBoolean("autoOpen")&&l){WA.state[e.name]=!0;return}if(!WA.state[e.name]&&(f&&!l||!f)&&(n.getString("code")||n.getString("codeVariable"))){T();return}l&&(WA.state[e.name]?h():m())}function b(){s=!1,n.getBoolean("autoClose")&&(WA.state[e.name]=!1),i&&i.remove(),C()}t.type==="tilelayer"?(WA.room.onEnterLayer(o).subscribe(p),WA.room.onLeaveLayer(o).subscribe(b)):(WA.room.area.onEnter(o).subscribe(p),WA.room.area.onLeave(o).subscribe(b)),WA.state.onVariableChange(e.name).subscribe(()=>{s&&(!n.getBoolean("autoClose")&&WA.state[e.name]===!0&&h(),a&&WA.state[e.name]===!0&&C(),!n.getBoolean("autoOpen")&&WA.state[e.name]===!1&&m())})}function Te(t){const e=t.properties.mustGetString("bellSound"),n=t.properties.getNumber("soundRadius");let r=1;if(n){const o=Math.sqrt(Math.pow(t.x-q,2)+Math.pow(t.y-U,2));if(o>n)return;r=1-o/n}WA.sound.loadSound(e).play({volume:r})}function Be(t){WA.state[t.name]===void 0&&(WA.state[t.name]=0),WA.state.onVariableChange(t.name).subscribe(()=>{WA.state[t.name]&&Te(t)})}function H(t,e,n){let r;const o=e.getString("bellPopup");if(n.type==="tilelayer"){const i=n.name;WA.room.onEnterLayer(i).subscribe(()=>{var a;o?r=WA.ui.openPopup(o,"",[{label:(a=e.getString("bellButtonText"))!==null&&a!==void 0?a:"Ring",callback:()=>{WA.state[t]=WA.state[t]+1}}]):WA.state[t]=WA.state[t]+1}),WA.room.onLeaveLayer(i).subscribe(()=>{r&&(r.close(),r=void 0)})}else{const i=n.name;WA.room.area.onEnter(i).subscribe(()=>{var a;o?r=WA.ui.openPopup(o,"",[{label:(a=e.getString("bellButtonText"))!==null&&a!==void 0?a:"Ring",callback:()=>{WA.state[t]=WA.state[t]+1}}]):WA.state[t]=WA.state[t]+1}),WA.room.area.onLeave(i).subscribe(()=>{r&&(r.close(),r=void 0)})}}async function ke(t){t=t??G;const e=await oe();j=await L();for(const n of e.values())n.properties.get("door")&&Pe(n),n.properties.get("bell")&&Be(n);for(const n of j.values()){const r=new W(n.properties),o=r.getString("doorVariable");if(o&&n.type==="tilelayer"){const a=e.get(o);if(a===void 0)throw new Error('Cannot find variable "'+o+'" referred in the "doorVariable" property of layer "'+n.name+'"');z(n,a,r,t)}const i=r.getString("bellVariable");i&&n.type==="tilelayer"&&H(i,r,n)}for(const n of await Q()){const r=new W(n.properties),o=r.getString("doorVariable");if(o){const a=e.get(o);if(a===void 0)throw new Error('Cannot find variable "'+o+'" referred in the "doorVariable" property of object "'+n.name+'"');z(n,a,r,t)}const i=r.getString("bellVariable");i&&H(i,r,n)}WA.player.onPlayerMove(n=>{q=n.x,U=n.y})}function xe(t,e){const n=t.getString("bindVariable");if(n){const r=t.get("enterValue"),o=t.get("leaveValue"),i=t.getString("triggerMessage"),a=t.getString("tag");Re(n,e,r,o,i,a)}}function Re(t,e,n,r,o,i){i&&!WA.player.tags.includes(i)||(n!==void 0&&WA.room.onEnterLayer(e).subscribe(()=>{o||(WA.state[t]=n)}),r!==void 0&&WA.room.onLeaveLayer(e).subscribe(()=>{WA.state[t]=r}))}async function Ve(){const t=await L();for(const e of t.values()){const n=new W(e.properties);xe(n,e.name)}}let X;async function je(t){const e=await WA.room.getTiledMap();t=t??G,X=await L();const n=e.layers.find(r=>r.name==="configuration");if(n){const o=new W(n.properties).getString("tag");(!o||WA.player.tags.includes(o))&&WA.ui.registerMenuCommand("Configure the room",()=>{WA.nav.openCoWebSite(t+"/configuration.html",!0)});for(const i of X.values()){const a=new W(i.properties),s=a.getString("openConfig");s&&i.type==="tilelayer"&&Ge(s.split(","),i.name,a)}}}function Ge(t,e,n){let r;const o=n.getString("openConfigAdminTag");let i=!0;o&&!WA.player.tags.includes(o)&&(i=!1);function a(){var u;r&&r.remove(),r=WA.ui.displayActionMessage({message:(u=n.getString("openConfigTriggerMessage"))!==null&&u!==void 0?u:"Press SPACE or touch here to configure",callback:()=>D(t)})}function s(){WA.nav.closeCoWebSite()}WA.room.onEnterLayer(e).subscribe(()=>{const u=n.getString("openConfigTrigger");i&&(u&&u==="onaction"?a():D(t))}),WA.room.onLeaveLayer(e).subscribe(()=>{r&&r.remove(),s()})}function Ie(){return WA.onInit().then(()=>{ke().catch(t=>console.error(t)),Ve().catch(t=>console.error(t)),je().catch(t=>console.error(t)),Ee().catch(t=>console.error(t)),Ce().catch(t=>console.error(t))}).catch(t=>console.error(t))}console.log("Script started successfully");let k;WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),WA.ui.registerMenuCommand("Menu test",{callback:()=>{WA.chat.sendChatMessage("registerMenuCommand Menu test")}}),WA.room.area.onEnter("btnicon").subscribe(()=>{WA.ui.actionBar.addButton({id:"help-btn",type:"action",imageSrc:"./map.png",toolTip:"Test BTN 1",callback:()=>{WA.nav.openCoWebSite("https://hugoaverty.github.io/eiffage-UI/src/help.pdf")}})}),WA.room.area.onEnter("btntext").subscribe(()=>{WA.ui.actionBar.addButton({id:"text-btn",label:"Button test",callback:t=>{WA.chat.sendChatMessage("Button test")}})}),WA.room.area.onEnter("actionMessage").subscribe(()=>{WA.ui.displayActionMessage({message:"press 'space' to confirm",callback:()=>{WA.chat.sendChatMessage("confirmed","trigger message logic")}})}),WA.room.area.onEnter("multiplePopup").subscribe(()=>{WA.ui.displayActionMessage({message:`Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. 
 Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`,callback:()=>{WA.chat.sendChatMessage("confirmed","trigger message logic")}})}),WA.room.area.onEnter("multiplePopup").subscribe(()=>{WA.ui.displayActionMessage({message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, officia deserunt mollit anim id est laborum.",callback:()=>{WA.chat.sendChatMessage("confirmed","trigger message logic")}})}),WA.room.area.onEnter("banner").subscribe(()=>{WA.ui.banner.openBanner({id:"banner-test2",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",bgColor:"rgb(65, 86, 246)",textColor:"#ffffff",closable:!0,timeToClose:12e4,link:{label:"Button exemple",url:"https://workadventu.re"}})}),WA.room.area.onEnter("popupZone").subscribe(()=>{k=WA.ui.openPopup("popupTest","Test popup OK Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",[{label:"Close",className:"success",callback:t=>{t.close()}}])}),WA.room.area.onLeave("popupZone").subscribe(qe),WA.room.area.onEnter("popupWideZone").subscribe(()=>{WA.ui.modal.openModal({src:"https://hugoaverty.github.io/eiffage-UI/src/",allow:"fullscreen",title:"Bienvenue",allowApi:!0,position:"left"})}),WA.room.area.onLeave("popupWideZone").subscribe(()=>{WA.ui.modal.closeModal()}),Ie().then(()=>{console.log("Scripting API Extra ready")}).catch(t=>console.error(t))}).catch(t=>console.error(t));function qe(){k!==void 0&&(k.close(),k=void 0)}
